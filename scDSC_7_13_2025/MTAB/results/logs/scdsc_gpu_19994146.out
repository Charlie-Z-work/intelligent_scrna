🚀 scDSC GPU训练开始: Sun Jul 13 12:48:35 AM CDT 2025
Sun Jul 13 00:48:35 2025       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.147.05   Driver Version: 525.147.05   CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  Tesla V100-SXM2...  On   | 00000000:15:00.0 Off |                    0 |
| N/A   26C    P0    42W / 300W |      0MiB / 32768MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
📦 安装缺失的依赖包...
Collecting scanpy
  Downloading scanpy-1.11.3-py3-none-any.whl.metadata (9.0 kB)
Collecting h5py
  Downloading h5py-3.14.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.7 kB)
Collecting munkres
  Downloading munkres-1.1.4-py2.py3-none-any.whl.metadata (980 bytes)
Collecting anndata>=0.8 (from scanpy)
  Downloading anndata-0.11.4-py3-none-any.whl.metadata (9.3 kB)
Requirement already satisfied: joblib in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (1.4.2)
Collecting legacy-api-wrap>=1.4.1 (from scanpy)
  Downloading legacy_api_wrap-1.4.1-py3-none-any.whl.metadata (2.1 kB)
Requirement already satisfied: matplotlib>=3.7.5 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (3.10.1)
Collecting natsort (from scanpy)
  Downloading natsort-8.4.0-py3-none-any.whl.metadata (21 kB)
Requirement already satisfied: networkx>=2.7.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (3.4.2)
Collecting numba>=0.57.1 (from scanpy)
  Downloading numba-0.61.2-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (2.8 kB)
Requirement already satisfied: numpy>=1.24.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (1.26.4)
Requirement already satisfied: packaging>=21.3 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (24.2)
Requirement already satisfied: pandas>=1.5.3 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (2.2.3)
Requirement already satisfied: patsy!=1.0.0 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (1.0.1)
Collecting pynndescent>=0.5.13 (from scanpy)
  Downloading pynndescent-0.5.13-py3-none-any.whl.metadata (6.8 kB)
Requirement already satisfied: scikit-learn>=1.1.3 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (1.6.1)
Requirement already satisfied: scipy<1.16.0,>=1.8.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (1.15.2)
Requirement already satisfied: seaborn>=0.13.2 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (0.13.2)
Collecting session-info2 (from scanpy)
  Downloading session_info2-0.1.2-py3-none-any.whl.metadata (2.5 kB)
Requirement already satisfied: statsmodels>=0.14.4 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (0.14.4)
Requirement already satisfied: tqdm in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (4.67.1)
Requirement already satisfied: typing-extensions in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scanpy) (4.13.0)
Collecting umap-learn>=0.5.6 (from scanpy)
  Downloading umap_learn-0.5.9.post2-py3-none-any.whl.metadata (25 kB)
Collecting array-api-compat!=1.5,>1.4 (from anndata>=0.8->scanpy)
  Downloading array_api_compat-1.12.0-py3-none-any.whl.metadata (2.5 kB)
Requirement already satisfied: contourpy>=1.0.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (1.3.1)
Requirement already satisfied: cycler>=0.10 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (0.12.1)
Requirement already satisfied: fonttools>=4.22.0 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (4.56.0)
Requirement already satisfied: kiwisolver>=1.3.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (1.4.8)
Requirement already satisfied: pillow>=8 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (11.2.0)
Requirement already satisfied: pyparsing>=2.3.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (3.2.3)
Requirement already satisfied: python-dateutil>=2.7 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from matplotlib>=3.7.5->scanpy) (2.9.0.post0)
Collecting llvmlite<0.45,>=0.44.0dev0 (from numba>=0.57.1->scanpy)
  Downloading llvmlite-0.44.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.8 kB)
Requirement already satisfied: pytz>=2020.1 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from pandas>=1.5.3->scanpy) (2025.2)
Requirement already satisfied: tzdata>=2022.7 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from pandas>=1.5.3->scanpy) (2025.2)
Requirement already satisfied: threadpoolctl>=3.1.0 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from scikit-learn>=1.1.3->scanpy) (3.6.0)
Requirement already satisfied: six>=1.5 in /hpc/m3/python/3.11.11/pytorch-2025.04.01/lib/python3.11/site-packages (from python-dateutil>=2.7->matplotlib>=3.7.5->scanpy) (1.17.0)
Downloading scanpy-1.11.3-py3-none-any.whl (2.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 55.4 MB/s eta 0:00:00
Downloading h5py-3.14.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.5 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.5/4.5 MB 119.9 MB/s eta 0:00:00
Downloading munkres-1.1.4-py2.py3-none-any.whl (7.0 kB)
Downloading anndata-0.11.4-py3-none-any.whl (144 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 144.5/144.5 kB 22.8 MB/s eta 0:00:00
Downloading legacy_api_wrap-1.4.1-py3-none-any.whl (10.0 kB)
Downloading numba-0.61.2-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (3.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.8/3.8 MB 90.7 MB/s eta 0:00:00
Downloading pynndescent-0.5.13-py3-none-any.whl (56 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.9/56.9 kB 10.3 MB/s eta 0:00:00
Downloading umap_learn-0.5.9.post2-py3-none-any.whl (90 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 90.1/90.1 kB 15.1 MB/s eta 0:00:00
Downloading natsort-8.4.0-py3-none-any.whl (38 kB)
Downloading session_info2-0.1.2-py3-none-any.whl (14 kB)
Downloading array_api_compat-1.12.0-py3-none-any.whl (58 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.2/58.2 kB 8.8 MB/s eta 0:00:00
Downloading llvmlite-0.44.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (42.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.4/42.4 MB 69.6 MB/s eta 0:00:00
Installing collected packages: munkres, session-info2, natsort, llvmlite, legacy-api-wrap, h5py, array-api-compat, numba, pynndescent, anndata, umap-learn, scanpy
Successfully installed anndata-0.11.4 array-api-compat-1.12.0 h5py-3.14.0 legacy-api-wrap-1.4.1 llvmlite-0.44.0 munkres-1.1.4 natsort-8.4.0 numba-0.61.2 pynndescent-0.5.13 scanpy-1.11.3 session-info2-0.1.2 umap-learn-0.5.9.post2
📊 检查数据文件...
data/:
total 94900
drwxr-sr-x 2 tzheng hpcusers     4096 Jul 13 00:27 .
drwxr-sr-x 8 tzheng hpcusers     4096 Jul 13 00:48 ..
-rw-r--r-- 1 tzheng hpcusers      120 Jul 13 00:20 ._.DS_Store
-rw-r--r-- 1 tzheng hpcusers     6148 Jul 13 00:20 .DS_Store
-rw-r--r-- 1 tzheng hpcusers      332 Jul  4 15:28 ._mtab_label.txt
-rw-r--r-- 1 tzheng hpcusers     2386 Jul  4 15:28 mtab_label.txt
-rw-r--r-- 1 tzheng hpcusers      276 Jun 27 02:58 ._mtab.txt
-rw-r--r-- 1 tzheng hpcusers 96757340 Jun 27 02:58 mtab.txt

graph/:
total 20
drwxr-sr-x 2 tzheng hpcusers 4096 Jul 13 00:27 .
drwxr-sr-x 8 tzheng hpcusers 4096 Jul 13 00:48 ..
-rw-r--r-- 1 tzheng hpcusers  120 Jul 13 00:20 ._.DS_Store
-rw-r--r-- 1 tzheng hpcusers 6148 Jul 13 00:20 .DS_Store

model/:
total 20
drwxr-sr-x 2 tzheng hpcusers 4096 Jul 13 00:27 .
drwxr-sr-x 8 tzheng hpcusers 4096 Jul 13 00:48 ..
-rw-r--r-- 1 tzheng hpcusers  120 Jul 13 00:20 ._.DS_Store
-rw-r--r-- 1 tzheng hpcusers 6148 Jul 13 00:20 .DS_Store
🔧 运行GPU版本...
🚀 scDSC 论文复现流水线启动
📍 工作目录: /users/tzheng/scDSC/scDSC_7_13_2025/MTAB
🐍 Python版本: 3.11.11 | packaged by conda-forge | (main, Mar  3 2025, 20:43:55) [GCC 13.3.0]

============================================================
🕐 [00:48:48] 依赖检查
============================================================
✅ numpy
✅ pandas
✅ torch
✅ sklearn
✅ scanpy
✅ matplotlib
✅ seaborn
✅ h5py

============================================================
🕐 [00:48:53] 数据文件检查
============================================================
✅ data/mtab.txt (96757340 bytes)
✅ data/mtab_label.txt (2386 bytes)
📁 data/ 目录已确保存在
📁 graph/ 目录已确保存在
📁 model/ 目录已确保存在
📁 results/ 目录已确保存在

🎯 步骤 1/5: 数据预处理

============================================================
🕐 [00:48:53] 开始 数据预处理
============================================================
❌ 数据预处理 失败!
错误代码: 1
错误输出:
Traceback (most recent call last):
  File "/users/tzheng/scDSC/scDSC_7_13_2025/MTAB/preprocess_mtab.py", line 12, in <module>
    sc.settings.set_figure_params(dpi=80, facecolor='white')
  File "/users/tzheng/.local/lib/python3.11/site-packages/scanpy/_settings/__init__.py", line 338, in set_figure_params
    cls.set_figure_params(*args, **kwargs)
  File "/users/tzheng/.local/lib/python3.11/site-packages/scanpy/_settings/__init__.py", line 338, in set_figure_params
    cls.set_figure_params(*args, **kwargs)
  File "/users/tzheng/.local/lib/python3.11/site-packages/scanpy/_settings/__init__.py", line 338, in set_figure_params
    cls.set_figure_params(*args, **kwargs)
  [Previous line repeated 996 more times]
RecursionError: maximum recursion depth exceeded in comparison


💥 流水线在步骤 1 失败: 数据预处理
🛑 终止执行

💥 流水线执行失败!
✅ 训练完成: Sun Jul 13 12:48:58 AM CDT 2025
